{"name":"Create Forien Easy Poll","permission":{"default":0,"5IyOZU5dg7eXt9y3":3},"type":"script","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.vtNP4LXl9SvLDVku"}},"scope":"global","command":"let dialogHtml=null,table=null,dialog=null,first=!0;const processOptions=function(){table.find(\".df_macro_poll_create_numeral\").each(function(t){$(this).text(`${t+1}. `)}),table.find(\".df_macro_poll_create_option\").each(function(t){$(this).placeholder(`Option ${t+1}`)})};(dialog=new Dialog({title:\"Create Forien Easy Poll\",label:\"create\",buttons:{cancel:{icon:'<i class=\"fas fa-times\"></i>',label:game.i18n.localize(\"Cancel\"),callback:t=>{}},create:{icon:'<i class=\"fas fa-check\"></i>',label:game.i18n.localize(\"Create\"),callback:t=>{let l=\"/p \"+((t=$(t)).find(\"#df_macro_poll_create_title\").val()||\"General Poll\");t.find(\".df_macro_poll_create_option\").each(function(t){l=l+\"\\n\"+($(this).val()||`Option ${t+1}`)}),ui.chat.processMessage(l)}}},callback:()=>{},default:\"create\",content:'<table id=\"df_macro_poll_create\" style=\"margin-bottom:24px\"><thead><input type=\"text\" id=\"df_macro_poll_create_title\" placeholder=\"Poll Title\"><br><button id=\"df_macro_poll_add\" style=\"margin:12px 0\"><i class=\"fas fa-add\"></i> Add Option</button></thead></table>',render:t=>{dialogHtml=$(t),table=dialogHtml.find(\"#df_macro_poll_create\"),t.find(\"#df_macro_poll_add\").click(()=>{const t=table.find(\".df_macro_poll_create_numeral\").length+1,l=$(`<tr>\\n\\t\\t<td class=\"df_macro_poll_create_numeral\">${t}. </td>\\n\\t\\t<td><input class=\"df_macro_poll_create_option\" type=\"text\" placeholder=\"Option ${t}\" /></td>\\n\\t\\t<td><button class=\"df_macro_poll_create_delete\"><i class=\"fas fa-times\"></i></button></td>\\n\\t</tr>`);table.append(l),l.find(\".df_macro_poll_create_delete\").click(()=>{dialog.setPosition({height:dialog.position.height-l.height()}),l.remove(),processOptions()}),first?first=!1:(dialog.setPosition({height:dialog.position.height+l.height()}),processOptions())}),dialogHtml.find(\"#df_macro_poll_add\").click()}},{resizable:!0})).render(!0);","author":"5IyOZU5dg7eXt9y3","img":"icons/sundries/documents/document-sealed-signatures-red.webp","actorIds":[],"_id":"JKg065H1UKFBI12S"}
